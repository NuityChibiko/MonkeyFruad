{"ast":null,"code":"'use strict';\n\nvar fs = require('fs');\n\nvar qs = require('querystring');\n\nvar validate = require('har-validator');\n\nvar extend = require('extend');\n\nfunction Har(request) {\n  this.request = request;\n}\n\nHar.prototype.reducer = function (obj, pair) {\n  // new property ?\n  if (obj[pair.name] === undefined) {\n    obj[pair.name] = pair.value;\n    return obj;\n  } // existing? convert to array\n\n\n  var arr = [obj[pair.name], pair.value];\n  obj[pair.name] = arr;\n  return obj;\n};\n\nHar.prototype.prep = function (data) {\n  // construct utility properties\n  data.queryObj = {};\n  data.headersObj = {};\n  data.postData.jsonObj = false;\n  data.postData.paramsObj = false; // construct query objects\n\n  if (data.queryString && data.queryString.length) {\n    data.queryObj = data.queryString.reduce(this.reducer, {});\n  } // construct headers objects\n\n\n  if (data.headers && data.headers.length) {\n    // loweCase header keys\n    data.headersObj = data.headers.reduceRight(function (headers, header) {\n      headers[header.name] = header.value;\n      return headers;\n    }, {});\n  } // construct Cookie header\n\n\n  if (data.cookies && data.cookies.length) {\n    var cookies = data.cookies.map(function (cookie) {\n      return cookie.name + '=' + cookie.value;\n    });\n\n    if (cookies.length) {\n      data.headersObj.cookie = cookies.join('; ');\n    }\n  } // prep body\n\n\n  function some(arr) {\n    return arr.some(function (type) {\n      return data.postData.mimeType.indexOf(type) === 0;\n    });\n  }\n\n  if (some(['multipart/mixed', 'multipart/related', 'multipart/form-data', 'multipart/alternative'])) {\n    // reset values\n    data.postData.mimeType = 'multipart/form-data';\n  } else if (some(['application/x-www-form-urlencoded'])) {\n    if (!data.postData.params) {\n      data.postData.text = '';\n    } else {\n      data.postData.paramsObj = data.postData.params.reduce(this.reducer, {}); // always overwrite\n\n      data.postData.text = qs.stringify(data.postData.paramsObj);\n    }\n  } else if (some(['text/json', 'text/x-json', 'application/json', 'application/x-json'])) {\n    data.postData.mimeType = 'application/json';\n\n    if (data.postData.text) {\n      try {\n        data.postData.jsonObj = JSON.parse(data.postData.text);\n      } catch (e) {\n        this.request.debug(e); // force back to text/plain\n\n        data.postData.mimeType = 'text/plain';\n      }\n    }\n  }\n\n  return data;\n};\n\nHar.prototype.options = function (options) {\n  // skip if no har property defined\n  if (!options.har) {\n    return options;\n  }\n\n  var har = {};\n  extend(har, options.har); // only process the first entry\n\n  if (har.log && har.log.entries) {\n    har = har.log.entries[0];\n  } // add optional properties to make validation successful\n\n\n  har.url = har.url || options.url || options.uri || options.baseUrl || '/';\n  har.httpVersion = har.httpVersion || 'HTTP/1.1';\n  har.queryString = har.queryString || [];\n  har.headers = har.headers || [];\n  har.cookies = har.cookies || [];\n  har.postData = har.postData || {};\n  har.postData.mimeType = har.postData.mimeType || 'application/octet-stream';\n  har.bodySize = 0;\n  har.headersSize = 0;\n  har.postData.size = 0;\n\n  if (!validate.request(har)) {\n    return options;\n  } // clean up and get some utility properties\n\n\n  var req = this.prep(har); // construct new options\n\n  if (req.url) {\n    options.url = req.url;\n  }\n\n  if (req.method) {\n    options.method = req.method;\n  }\n\n  if (Object.keys(req.queryObj).length) {\n    options.qs = req.queryObj;\n  }\n\n  if (Object.keys(req.headersObj).length) {\n    options.headers = req.headersObj;\n  }\n\n  function test(type) {\n    return req.postData.mimeType.indexOf(type) === 0;\n  }\n\n  if (test('application/x-www-form-urlencoded')) {\n    options.form = req.postData.paramsObj;\n  } else if (test('application/json')) {\n    if (req.postData.jsonObj) {\n      options.body = req.postData.jsonObj;\n      options.json = true;\n    }\n  } else if (test('multipart/form-data')) {\n    options.formData = {};\n    req.postData.params.forEach(function (param) {\n      var attachment = {};\n\n      if (!param.fileName && !param.contentType) {\n        options.formData[param.name] = param.value;\n        return;\n      } // attempt to read from disk!\n\n\n      if (param.fileName && !param.value) {\n        attachment.value = fs.createReadStream(param.fileName);\n      } else if (param.value) {\n        attachment.value = param.value;\n      }\n\n      if (param.fileName) {\n        attachment.options = {\n          filename: param.fileName,\n          contentType: param.contentType ? param.contentType : null\n        };\n      }\n\n      options.formData[param.name] = attachment;\n    });\n  } else {\n    if (req.postData.text) {\n      options.body = req.postData.text;\n    }\n  }\n\n  return options;\n};\n\nexports.Har = Har;","map":{"version":3,"sources":["D:/PROJECT ALL/MonkeyFruad/Frontend/node_modules/request/lib/har.js"],"names":["fs","require","qs","validate","extend","Har","request","prototype","reducer","obj","pair","name","undefined","value","arr","prep","data","queryObj","headersObj","postData","jsonObj","paramsObj","queryString","length","reduce","headers","reduceRight","header","cookies","map","cookie","join","some","type","mimeType","indexOf","params","text","stringify","JSON","parse","e","debug","options","har","log","entries","url","uri","baseUrl","httpVersion","bodySize","headersSize","size","req","method","Object","keys","test","form","body","json","formData","forEach","param","attachment","fileName","contentType","createReadStream","filename","exports"],"mappings":"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","sourcesContent":["'use strict'\r\n\r\nvar fs = require('fs')\r\nvar qs = require('querystring')\r\nvar validate = require('har-validator')\r\nvar extend = require('extend')\r\n\r\nfunction Har (request) {\r\n  this.request = request\r\n}\r\n\r\nHar.prototype.reducer = function (obj, pair) {\r\n  // new property ?\r\n  if (obj[pair.name] === undefined) {\r\n    obj[pair.name] = pair.value\r\n    return obj\r\n  }\r\n\r\n  // existing? convert to array\r\n  var arr = [\r\n    obj[pair.name],\r\n    pair.value\r\n  ]\r\n\r\n  obj[pair.name] = arr\r\n\r\n  return obj\r\n}\r\n\r\nHar.prototype.prep = function (data) {\r\n  // construct utility properties\r\n  data.queryObj = {}\r\n  data.headersObj = {}\r\n  data.postData.jsonObj = false\r\n  data.postData.paramsObj = false\r\n\r\n  // construct query objects\r\n  if (data.queryString && data.queryString.length) {\r\n    data.queryObj = data.queryString.reduce(this.reducer, {})\r\n  }\r\n\r\n  // construct headers objects\r\n  if (data.headers && data.headers.length) {\r\n    // loweCase header keys\r\n    data.headersObj = data.headers.reduceRight(function (headers, header) {\r\n      headers[header.name] = header.value\r\n      return headers\r\n    }, {})\r\n  }\r\n\r\n  // construct Cookie header\r\n  if (data.cookies && data.cookies.length) {\r\n    var cookies = data.cookies.map(function (cookie) {\r\n      return cookie.name + '=' + cookie.value\r\n    })\r\n\r\n    if (cookies.length) {\r\n      data.headersObj.cookie = cookies.join('; ')\r\n    }\r\n  }\r\n\r\n  // prep body\r\n  function some (arr) {\r\n    return arr.some(function (type) {\r\n      return data.postData.mimeType.indexOf(type) === 0\r\n    })\r\n  }\r\n\r\n  if (some([\r\n    'multipart/mixed',\r\n    'multipart/related',\r\n    'multipart/form-data',\r\n    'multipart/alternative'])) {\r\n    // reset values\r\n    data.postData.mimeType = 'multipart/form-data'\r\n  } else if (some([\r\n    'application/x-www-form-urlencoded'])) {\r\n    if (!data.postData.params) {\r\n      data.postData.text = ''\r\n    } else {\r\n      data.postData.paramsObj = data.postData.params.reduce(this.reducer, {})\r\n\r\n      // always overwrite\r\n      data.postData.text = qs.stringify(data.postData.paramsObj)\r\n    }\r\n  } else if (some([\r\n    'text/json',\r\n    'text/x-json',\r\n    'application/json',\r\n    'application/x-json'])) {\r\n    data.postData.mimeType = 'application/json'\r\n\r\n    if (data.postData.text) {\r\n      try {\r\n        data.postData.jsonObj = JSON.parse(data.postData.text)\r\n      } catch (e) {\r\n        this.request.debug(e)\r\n\r\n        // force back to text/plain\r\n        data.postData.mimeType = 'text/plain'\r\n      }\r\n    }\r\n  }\r\n\r\n  return data\r\n}\r\n\r\nHar.prototype.options = function (options) {\r\n  // skip if no har property defined\r\n  if (!options.har) {\r\n    return options\r\n  }\r\n\r\n  var har = {}\r\n  extend(har, options.har)\r\n\r\n  // only process the first entry\r\n  if (har.log && har.log.entries) {\r\n    har = har.log.entries[0]\r\n  }\r\n\r\n  // add optional properties to make validation successful\r\n  har.url = har.url || options.url || options.uri || options.baseUrl || '/'\r\n  har.httpVersion = har.httpVersion || 'HTTP/1.1'\r\n  har.queryString = har.queryString || []\r\n  har.headers = har.headers || []\r\n  har.cookies = har.cookies || []\r\n  har.postData = har.postData || {}\r\n  har.postData.mimeType = har.postData.mimeType || 'application/octet-stream'\r\n\r\n  har.bodySize = 0\r\n  har.headersSize = 0\r\n  har.postData.size = 0\r\n\r\n  if (!validate.request(har)) {\r\n    return options\r\n  }\r\n\r\n  // clean up and get some utility properties\r\n  var req = this.prep(har)\r\n\r\n  // construct new options\r\n  if (req.url) {\r\n    options.url = req.url\r\n  }\r\n\r\n  if (req.method) {\r\n    options.method = req.method\r\n  }\r\n\r\n  if (Object.keys(req.queryObj).length) {\r\n    options.qs = req.queryObj\r\n  }\r\n\r\n  if (Object.keys(req.headersObj).length) {\r\n    options.headers = req.headersObj\r\n  }\r\n\r\n  function test (type) {\r\n    return req.postData.mimeType.indexOf(type) === 0\r\n  }\r\n  if (test('application/x-www-form-urlencoded')) {\r\n    options.form = req.postData.paramsObj\r\n  } else if (test('application/json')) {\r\n    if (req.postData.jsonObj) {\r\n      options.body = req.postData.jsonObj\r\n      options.json = true\r\n    }\r\n  } else if (test('multipart/form-data')) {\r\n    options.formData = {}\r\n\r\n    req.postData.params.forEach(function (param) {\r\n      var attachment = {}\r\n\r\n      if (!param.fileName && !param.contentType) {\r\n        options.formData[param.name] = param.value\r\n        return\r\n      }\r\n\r\n      // attempt to read from disk!\r\n      if (param.fileName && !param.value) {\r\n        attachment.value = fs.createReadStream(param.fileName)\r\n      } else if (param.value) {\r\n        attachment.value = param.value\r\n      }\r\n\r\n      if (param.fileName) {\r\n        attachment.options = {\r\n          filename: param.fileName,\r\n          contentType: param.contentType ? param.contentType : null\r\n        }\r\n      }\r\n\r\n      options.formData[param.name] = attachment\r\n    })\r\n  } else {\r\n    if (req.postData.text) {\r\n      options.body = req.postData.text\r\n    }\r\n  }\r\n\r\n  return options\r\n}\r\n\r\nexports.Har = Har\r\n"]},"metadata":{},"sourceType":"script"}