{"ast":null,"code":"/*! firebase-admin v9.4.2 */\n\"use strict\";\n/*!\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserRecord = exports.UserInfo = exports.UserMetadata = exports.MultiFactor = exports.PhoneMultiFactorInfo = exports.MultiFactorInfo = void 0;\n\nvar deep_copy_1 = require(\"../utils/deep-copy\");\n\nvar validator_1 = require(\"../utils/validator\");\n\nvar utils = require(\"../utils\");\n\nvar error_1 = require(\"../utils/error\");\n/**\r\n * 'REDACTED', encoded as a base64 string.\r\n */\n\n\nvar B64_REDACTED = Buffer.from('REDACTED').toString('base64');\n/**\r\n * Parses a time stamp string or number and returns the corresponding date if valid.\r\n *\r\n * @param {any} time The unix timestamp string or number in milliseconds.\r\n * @return {string} The corresponding date as a UTC string, if valid. Otherwise, null.\r\n */\n\nfunction parseDate(time) {\n  try {\n    var date = new Date(parseInt(time, 10));\n\n    if (!isNaN(date.getTime())) {\n      return date.toUTCString();\n    }\n  } catch (e) {// Do nothing. null will be returned.\n  }\n\n  return null;\n}\n\nvar MultiFactorId;\n\n(function (MultiFactorId) {\n  MultiFactorId[\"Phone\"] = \"phone\";\n})(MultiFactorId || (MultiFactorId = {}));\n/**\r\n * Abstract class representing a multi-factor info interface.\r\n */\n\n\nvar MultiFactorInfo =\n/** @class */\nfunction () {\n  /**\r\n   * Initializes the MultiFactorInfo object using the server side response.\r\n   *\r\n   * @param response The server side response.\r\n   * @constructor\r\n   */\n  function MultiFactorInfo(response) {\n    this.initFromServerResponse(response);\n  }\n  /**\r\n   * Initializes the MultiFactorInfo associated subclass using the server side.\r\n   * If no MultiFactorInfo is associated with the response, null is returned.\r\n   *\r\n   * @param response The server side response.\r\n   * @constructor\r\n   */\n\n\n  MultiFactorInfo.initMultiFactorInfo = function (response) {\n    var multiFactorInfo = null; // Only PhoneMultiFactorInfo currently available.\n\n    try {\n      multiFactorInfo = new PhoneMultiFactorInfo(response);\n    } catch (e) {// Ignore error.\n    }\n\n    return multiFactorInfo;\n  };\n  /** @return The plain object representation. */\n\n\n  MultiFactorInfo.prototype.toJSON = function () {\n    return {\n      uid: this.uid,\n      displayName: this.displayName,\n      factorId: this.factorId,\n      enrollmentTime: this.enrollmentTime\n    };\n  };\n  /**\r\n   * Initializes the MultiFactorInfo object using the provided server response.\r\n   *\r\n   * @param response The server side response.\r\n   */\n\n\n  MultiFactorInfo.prototype.initFromServerResponse = function (response) {\n    var factorId = response && this.getFactorId(response);\n\n    if (!factorId || !response || !response.mfaEnrollmentId) {\n      throw new error_1.FirebaseAuthError(error_1.AuthClientErrorCode.INTERNAL_ERROR, 'INTERNAL ASSERT FAILED: Invalid multi-factor info response');\n    }\n\n    utils.addReadonlyGetter(this, 'uid', response.mfaEnrollmentId);\n    utils.addReadonlyGetter(this, 'factorId', factorId);\n    utils.addReadonlyGetter(this, 'displayName', response.displayName); // Encoded using [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) format.\n    // For example, \"2017-01-15T01:30:15.01Z\".\n    // This can be parsed directly via Date constructor.\n    // This can be computed using Data.prototype.toISOString.\n\n    if (response.enrolledAt) {\n      utils.addReadonlyGetter(this, 'enrollmentTime', new Date(response.enrolledAt).toUTCString());\n    } else {\n      utils.addReadonlyGetter(this, 'enrollmentTime', null);\n    }\n  };\n\n  return MultiFactorInfo;\n}();\n\nexports.MultiFactorInfo = MultiFactorInfo;\n/** Class representing a phone MultiFactorInfo object. */\n\nvar PhoneMultiFactorInfo =\n/** @class */\nfunction (_super) {\n  __extends(PhoneMultiFactorInfo, _super);\n  /**\r\n   * Initializes the PhoneMultiFactorInfo object using the server side response.\r\n   *\r\n   * @param response The server side response.\r\n   * @constructor\r\n   */\n\n\n  function PhoneMultiFactorInfo(response) {\n    var _this = _super.call(this, response) || this;\n\n    utils.addReadonlyGetter(_this, 'phoneNumber', response.phoneInfo);\n    return _this;\n  }\n  /** @return The plain object representation. */\n\n\n  PhoneMultiFactorInfo.prototype.toJSON = function () {\n    return Object.assign(_super.prototype.toJSON.call(this), {\n      phoneNumber: this.phoneNumber\n    });\n  };\n  /**\r\n   * Returns the factor ID based on the response provided.\r\n   *\r\n   * @param response The server side response.\r\n   * @return The multi-factor ID associated with the provided response. If the response is\r\n   *     not associated with any known multi-factor ID, null is returned.\r\n   */\n\n\n  PhoneMultiFactorInfo.prototype.getFactorId = function (response) {\n    return response && response.phoneInfo ? MultiFactorId.Phone : null;\n  };\n\n  return PhoneMultiFactorInfo;\n}(MultiFactorInfo);\n\nexports.PhoneMultiFactorInfo = PhoneMultiFactorInfo;\n/** Class representing multi-factor related properties of a user. */\n\nvar MultiFactor =\n/** @class */\nfunction () {\n  /**\r\n   * Initializes the MultiFactor object using the server side or JWT format response.\r\n   *\r\n   * @param response The server side response.\r\n   * @constructor\r\n   */\n  function MultiFactor(response) {\n    var parsedEnrolledFactors = [];\n\n    if (!validator_1.isNonNullObject(response)) {\n      throw new error_1.FirebaseAuthError(error_1.AuthClientErrorCode.INTERNAL_ERROR, 'INTERNAL ASSERT FAILED: Invalid multi-factor response');\n    } else if (response.mfaInfo) {\n      response.mfaInfo.forEach(function (factorResponse) {\n        var multiFactorInfo = MultiFactorInfo.initMultiFactorInfo(factorResponse);\n\n        if (multiFactorInfo) {\n          parsedEnrolledFactors.push(multiFactorInfo);\n        }\n      });\n    } // Make enrolled factors immutable.\n\n\n    utils.addReadonlyGetter(this, 'enrolledFactors', Object.freeze(parsedEnrolledFactors));\n  }\n  /** @return The plain object representation. */\n\n\n  MultiFactor.prototype.toJSON = function () {\n    return {\n      enrolledFactors: this.enrolledFactors.map(function (info) {\n        return info.toJSON();\n      })\n    };\n  };\n\n  return MultiFactor;\n}();\n\nexports.MultiFactor = MultiFactor;\n/**\r\n * User metadata class that provides metadata information like user account creation\r\n * and last sign in time.\r\n *\r\n * @param response The server side response returned from the getAccountInfo\r\n *     endpoint.\r\n * @constructor\r\n */\n\nvar UserMetadata =\n/** @class */\nfunction () {\n  function UserMetadata(response) {\n    // Creation date should always be available but due to some backend bugs there\n    // were cases in the past where users did not have creation date properly set.\n    // This included legacy Firebase migrating project users and some anonymous users.\n    // These bugs have already been addressed since then.\n    utils.addReadonlyGetter(this, 'creationTime', parseDate(response.createdAt));\n    utils.addReadonlyGetter(this, 'lastSignInTime', parseDate(response.lastLoginAt));\n    var lastRefreshAt = response.lastRefreshAt ? new Date(response.lastRefreshAt).toUTCString() : null;\n    utils.addReadonlyGetter(this, 'lastRefreshTime', lastRefreshAt);\n  }\n  /** @return The plain object representation of the user's metadata. */\n\n\n  UserMetadata.prototype.toJSON = function () {\n    return {\n      lastSignInTime: this.lastSignInTime,\n      creationTime: this.creationTime\n    };\n  };\n\n  return UserMetadata;\n}();\n\nexports.UserMetadata = UserMetadata;\n/**\r\n * User info class that provides provider user information for different\r\n * Firebase providers like google.com, facebook.com, password, etc.\r\n *\r\n * @param response The server side response returned from the getAccountInfo\r\n *     endpoint.\r\n * @constructor\r\n */\n\nvar UserInfo =\n/** @class */\nfunction () {\n  function UserInfo(response) {\n    // Provider user id and provider id are required.\n    if (!response.rawId || !response.providerId) {\n      throw new error_1.FirebaseAuthError(error_1.AuthClientErrorCode.INTERNAL_ERROR, 'INTERNAL ASSERT FAILED: Invalid user info response');\n    }\n\n    utils.addReadonlyGetter(this, 'uid', response.rawId);\n    utils.addReadonlyGetter(this, 'displayName', response.displayName);\n    utils.addReadonlyGetter(this, 'email', response.email);\n    utils.addReadonlyGetter(this, 'photoURL', response.photoUrl);\n    utils.addReadonlyGetter(this, 'providerId', response.providerId);\n    utils.addReadonlyGetter(this, 'phoneNumber', response.phoneNumber);\n  }\n  /** @return The plain object representation of the current provider data. */\n\n\n  UserInfo.prototype.toJSON = function () {\n    return {\n      uid: this.uid,\n      displayName: this.displayName,\n      email: this.email,\n      photoURL: this.photoURL,\n      providerId: this.providerId,\n      phoneNumber: this.phoneNumber\n    };\n  };\n\n  return UserInfo;\n}();\n\nexports.UserInfo = UserInfo;\n/**\r\n * User record class that defines the Firebase user object populated from\r\n * the Firebase Auth getAccountInfo response.\r\n *\r\n * @param response The server side response returned from the getAccountInfo\r\n *     endpoint.\r\n * @constructor\r\n */\n\nvar UserRecord =\n/** @class */\nfunction () {\n  function UserRecord(response) {\n    // The Firebase user id is required.\n    if (!response.localId) {\n      throw new error_1.FirebaseAuthError(error_1.AuthClientErrorCode.INTERNAL_ERROR, 'INTERNAL ASSERT FAILED: Invalid user response');\n    }\n\n    utils.addReadonlyGetter(this, 'uid', response.localId);\n    utils.addReadonlyGetter(this, 'email', response.email);\n    utils.addReadonlyGetter(this, 'emailVerified', !!response.emailVerified);\n    utils.addReadonlyGetter(this, 'displayName', response.displayName);\n    utils.addReadonlyGetter(this, 'photoURL', response.photoUrl);\n    utils.addReadonlyGetter(this, 'phoneNumber', response.phoneNumber); // If disabled is not provided, the account is enabled by default.\n\n    utils.addReadonlyGetter(this, 'disabled', response.disabled || false);\n    utils.addReadonlyGetter(this, 'metadata', new UserMetadata(response));\n    var providerData = [];\n\n    for (var _i = 0, _a = response.providerUserInfo || []; _i < _a.length; _i++) {\n      var entry = _a[_i];\n      providerData.push(new UserInfo(entry));\n    }\n\n    utils.addReadonlyGetter(this, 'providerData', providerData); // If the password hash is redacted (probably due to missing permissions)\n    // then clear it out, similar to how the salt is returned. (Otherwise, it\n    // *looks* like a b64-encoded hash is present, which is confusing.)\n\n    if (response.passwordHash === B64_REDACTED) {\n      utils.addReadonlyGetter(this, 'passwordHash', undefined);\n    } else {\n      utils.addReadonlyGetter(this, 'passwordHash', response.passwordHash);\n    }\n\n    utils.addReadonlyGetter(this, 'passwordSalt', response.salt);\n\n    if (response.customAttributes) {\n      utils.addReadonlyGetter(this, 'customClaims', JSON.parse(response.customAttributes));\n    }\n\n    var validAfterTime = null; // Convert validSince first to UTC milliseconds and then to UTC date string.\n\n    if (typeof response.validSince !== 'undefined') {\n      validAfterTime = parseDate(parseInt(response.validSince, 10) * 1000);\n    }\n\n    utils.addReadonlyGetter(this, 'tokensValidAfterTime', validAfterTime || undefined);\n    utils.addReadonlyGetter(this, 'tenantId', response.tenantId);\n    var multiFactor = new MultiFactor(response);\n\n    if (multiFactor.enrolledFactors.length > 0) {\n      utils.addReadonlyGetter(this, 'multiFactor', multiFactor);\n    }\n  }\n  /** @return The plain object representation of the user record. */\n\n\n  UserRecord.prototype.toJSON = function () {\n    var json = {\n      uid: this.uid,\n      email: this.email,\n      emailVerified: this.emailVerified,\n      displayName: this.displayName,\n      photoURL: this.photoURL,\n      phoneNumber: this.phoneNumber,\n      disabled: this.disabled,\n      // Convert metadata to json.\n      metadata: this.metadata.toJSON(),\n      passwordHash: this.passwordHash,\n      passwordSalt: this.passwordSalt,\n      customClaims: deep_copy_1.deepCopy(this.customClaims),\n      tokensValidAfterTime: this.tokensValidAfterTime,\n      tenantId: this.tenantId\n    };\n\n    if (this.multiFactor) {\n      json.multiFactor = this.multiFactor.toJSON();\n    }\n\n    json.providerData = [];\n\n    for (var _i = 0, _a = this.providerData; _i < _a.length; _i++) {\n      var entry = _a[_i]; // Convert each provider data to json.\n\n      json.providerData.push(entry.toJSON());\n    }\n\n    return json;\n  };\n\n  return UserRecord;\n}();\n\nexports.UserRecord = UserRecord;","map":{"version":3,"sources":["D:/PROJECT ALL/MonkeyFruad/Backend/node_modules/firebase-admin/lib/auth/user-record.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","value","UserRecord","UserInfo","UserMetadata","MultiFactor","PhoneMultiFactorInfo","MultiFactorInfo","deep_copy_1","require","validator_1","utils","error_1","B64_REDACTED","Buffer","from","toString","parseDate","time","date","Date","parseInt","isNaN","getTime","toUTCString","e","MultiFactorId","response","initFromServerResponse","initMultiFactorInfo","multiFactorInfo","toJSON","uid","displayName","factorId","enrollmentTime","getFactorId","mfaEnrollmentId","FirebaseAuthError","AuthClientErrorCode","INTERNAL_ERROR","addReadonlyGetter","enrolledAt","_super","_this","call","phoneInfo","assign","phoneNumber","Phone","parsedEnrolledFactors","isNonNullObject","mfaInfo","forEach","factorResponse","push","freeze","enrolledFactors","map","info","createdAt","lastLoginAt","lastRefreshAt","lastSignInTime","creationTime","rawId","providerId","email","photoUrl","photoURL","localId","emailVerified","disabled","providerData","_i","_a","providerUserInfo","length","entry","passwordHash","undefined","salt","customAttributes","JSON","parse","validAfterTime","validSince","tenantId","multiFactor","json","metadata","passwordSalt","customClaims","deepCopy","tokensValidAfterTime"],"mappings":"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","sourcesContent":["/*! firebase-admin v9.4.2 */\r\n\"use strict\";\r\n/*!\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UserRecord = exports.UserInfo = exports.UserMetadata = exports.MultiFactor = exports.PhoneMultiFactorInfo = exports.MultiFactorInfo = void 0;\r\nvar deep_copy_1 = require(\"../utils/deep-copy\");\r\nvar validator_1 = require(\"../utils/validator\");\r\nvar utils = require(\"../utils\");\r\nvar error_1 = require(\"../utils/error\");\r\n/**\r\n * 'REDACTED', encoded as a base64 string.\r\n */\r\nvar B64_REDACTED = Buffer.from('REDACTED').toString('base64');\r\n/**\r\n * Parses a time stamp string or number and returns the corresponding date if valid.\r\n *\r\n * @param {any} time The unix timestamp string or number in milliseconds.\r\n * @return {string} The corresponding date as a UTC string, if valid. Otherwise, null.\r\n */\r\nfunction parseDate(time) {\r\n    try {\r\n        var date = new Date(parseInt(time, 10));\r\n        if (!isNaN(date.getTime())) {\r\n            return date.toUTCString();\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Do nothing. null will be returned.\r\n    }\r\n    return null;\r\n}\r\nvar MultiFactorId;\r\n(function (MultiFactorId) {\r\n    MultiFactorId[\"Phone\"] = \"phone\";\r\n})(MultiFactorId || (MultiFactorId = {}));\r\n/**\r\n * Abstract class representing a multi-factor info interface.\r\n */\r\nvar MultiFactorInfo = /** @class */ (function () {\r\n    /**\r\n     * Initializes the MultiFactorInfo object using the server side response.\r\n     *\r\n     * @param response The server side response.\r\n     * @constructor\r\n     */\r\n    function MultiFactorInfo(response) {\r\n        this.initFromServerResponse(response);\r\n    }\r\n    /**\r\n     * Initializes the MultiFactorInfo associated subclass using the server side.\r\n     * If no MultiFactorInfo is associated with the response, null is returned.\r\n     *\r\n     * @param response The server side response.\r\n     * @constructor\r\n     */\r\n    MultiFactorInfo.initMultiFactorInfo = function (response) {\r\n        var multiFactorInfo = null;\r\n        // Only PhoneMultiFactorInfo currently available.\r\n        try {\r\n            multiFactorInfo = new PhoneMultiFactorInfo(response);\r\n        }\r\n        catch (e) {\r\n            // Ignore error.\r\n        }\r\n        return multiFactorInfo;\r\n    };\r\n    /** @return The plain object representation. */\r\n    MultiFactorInfo.prototype.toJSON = function () {\r\n        return {\r\n            uid: this.uid,\r\n            displayName: this.displayName,\r\n            factorId: this.factorId,\r\n            enrollmentTime: this.enrollmentTime,\r\n        };\r\n    };\r\n    /**\r\n     * Initializes the MultiFactorInfo object using the provided server response.\r\n     *\r\n     * @param response The server side response.\r\n     */\r\n    MultiFactorInfo.prototype.initFromServerResponse = function (response) {\r\n        var factorId = response && this.getFactorId(response);\r\n        if (!factorId || !response || !response.mfaEnrollmentId) {\r\n            throw new error_1.FirebaseAuthError(error_1.AuthClientErrorCode.INTERNAL_ERROR, 'INTERNAL ASSERT FAILED: Invalid multi-factor info response');\r\n        }\r\n        utils.addReadonlyGetter(this, 'uid', response.mfaEnrollmentId);\r\n        utils.addReadonlyGetter(this, 'factorId', factorId);\r\n        utils.addReadonlyGetter(this, 'displayName', response.displayName);\r\n        // Encoded using [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) format.\r\n        // For example, \"2017-01-15T01:30:15.01Z\".\r\n        // This can be parsed directly via Date constructor.\r\n        // This can be computed using Data.prototype.toISOString.\r\n        if (response.enrolledAt) {\r\n            utils.addReadonlyGetter(this, 'enrollmentTime', new Date(response.enrolledAt).toUTCString());\r\n        }\r\n        else {\r\n            utils.addReadonlyGetter(this, 'enrollmentTime', null);\r\n        }\r\n    };\r\n    return MultiFactorInfo;\r\n}());\r\nexports.MultiFactorInfo = MultiFactorInfo;\r\n/** Class representing a phone MultiFactorInfo object. */\r\nvar PhoneMultiFactorInfo = /** @class */ (function (_super) {\r\n    __extends(PhoneMultiFactorInfo, _super);\r\n    /**\r\n     * Initializes the PhoneMultiFactorInfo object using the server side response.\r\n     *\r\n     * @param response The server side response.\r\n     * @constructor\r\n     */\r\n    function PhoneMultiFactorInfo(response) {\r\n        var _this = _super.call(this, response) || this;\r\n        utils.addReadonlyGetter(_this, 'phoneNumber', response.phoneInfo);\r\n        return _this;\r\n    }\r\n    /** @return The plain object representation. */\r\n    PhoneMultiFactorInfo.prototype.toJSON = function () {\r\n        return Object.assign(_super.prototype.toJSON.call(this), {\r\n            phoneNumber: this.phoneNumber,\r\n        });\r\n    };\r\n    /**\r\n     * Returns the factor ID based on the response provided.\r\n     *\r\n     * @param response The server side response.\r\n     * @return The multi-factor ID associated with the provided response. If the response is\r\n     *     not associated with any known multi-factor ID, null is returned.\r\n     */\r\n    PhoneMultiFactorInfo.prototype.getFactorId = function (response) {\r\n        return (response && response.phoneInfo) ? MultiFactorId.Phone : null;\r\n    };\r\n    return PhoneMultiFactorInfo;\r\n}(MultiFactorInfo));\r\nexports.PhoneMultiFactorInfo = PhoneMultiFactorInfo;\r\n/** Class representing multi-factor related properties of a user. */\r\nvar MultiFactor = /** @class */ (function () {\r\n    /**\r\n     * Initializes the MultiFactor object using the server side or JWT format response.\r\n     *\r\n     * @param response The server side response.\r\n     * @constructor\r\n     */\r\n    function MultiFactor(response) {\r\n        var parsedEnrolledFactors = [];\r\n        if (!validator_1.isNonNullObject(response)) {\r\n            throw new error_1.FirebaseAuthError(error_1.AuthClientErrorCode.INTERNAL_ERROR, 'INTERNAL ASSERT FAILED: Invalid multi-factor response');\r\n        }\r\n        else if (response.mfaInfo) {\r\n            response.mfaInfo.forEach(function (factorResponse) {\r\n                var multiFactorInfo = MultiFactorInfo.initMultiFactorInfo(factorResponse);\r\n                if (multiFactorInfo) {\r\n                    parsedEnrolledFactors.push(multiFactorInfo);\r\n                }\r\n            });\r\n        }\r\n        // Make enrolled factors immutable.\r\n        utils.addReadonlyGetter(this, 'enrolledFactors', Object.freeze(parsedEnrolledFactors));\r\n    }\r\n    /** @return The plain object representation. */\r\n    MultiFactor.prototype.toJSON = function () {\r\n        return {\r\n            enrolledFactors: this.enrolledFactors.map(function (info) { return info.toJSON(); }),\r\n        };\r\n    };\r\n    return MultiFactor;\r\n}());\r\nexports.MultiFactor = MultiFactor;\r\n/**\r\n * User metadata class that provides metadata information like user account creation\r\n * and last sign in time.\r\n *\r\n * @param response The server side response returned from the getAccountInfo\r\n *     endpoint.\r\n * @constructor\r\n */\r\nvar UserMetadata = /** @class */ (function () {\r\n    function UserMetadata(response) {\r\n        // Creation date should always be available but due to some backend bugs there\r\n        // were cases in the past where users did not have creation date properly set.\r\n        // This included legacy Firebase migrating project users and some anonymous users.\r\n        // These bugs have already been addressed since then.\r\n        utils.addReadonlyGetter(this, 'creationTime', parseDate(response.createdAt));\r\n        utils.addReadonlyGetter(this, 'lastSignInTime', parseDate(response.lastLoginAt));\r\n        var lastRefreshAt = response.lastRefreshAt ? new Date(response.lastRefreshAt).toUTCString() : null;\r\n        utils.addReadonlyGetter(this, 'lastRefreshTime', lastRefreshAt);\r\n    }\r\n    /** @return The plain object representation of the user's metadata. */\r\n    UserMetadata.prototype.toJSON = function () {\r\n        return {\r\n            lastSignInTime: this.lastSignInTime,\r\n            creationTime: this.creationTime,\r\n        };\r\n    };\r\n    return UserMetadata;\r\n}());\r\nexports.UserMetadata = UserMetadata;\r\n/**\r\n * User info class that provides provider user information for different\r\n * Firebase providers like google.com, facebook.com, password, etc.\r\n *\r\n * @param response The server side response returned from the getAccountInfo\r\n *     endpoint.\r\n * @constructor\r\n */\r\nvar UserInfo = /** @class */ (function () {\r\n    function UserInfo(response) {\r\n        // Provider user id and provider id are required.\r\n        if (!response.rawId || !response.providerId) {\r\n            throw new error_1.FirebaseAuthError(error_1.AuthClientErrorCode.INTERNAL_ERROR, 'INTERNAL ASSERT FAILED: Invalid user info response');\r\n        }\r\n        utils.addReadonlyGetter(this, 'uid', response.rawId);\r\n        utils.addReadonlyGetter(this, 'displayName', response.displayName);\r\n        utils.addReadonlyGetter(this, 'email', response.email);\r\n        utils.addReadonlyGetter(this, 'photoURL', response.photoUrl);\r\n        utils.addReadonlyGetter(this, 'providerId', response.providerId);\r\n        utils.addReadonlyGetter(this, 'phoneNumber', response.phoneNumber);\r\n    }\r\n    /** @return The plain object representation of the current provider data. */\r\n    UserInfo.prototype.toJSON = function () {\r\n        return {\r\n            uid: this.uid,\r\n            displayName: this.displayName,\r\n            email: this.email,\r\n            photoURL: this.photoURL,\r\n            providerId: this.providerId,\r\n            phoneNumber: this.phoneNumber,\r\n        };\r\n    };\r\n    return UserInfo;\r\n}());\r\nexports.UserInfo = UserInfo;\r\n/**\r\n * User record class that defines the Firebase user object populated from\r\n * the Firebase Auth getAccountInfo response.\r\n *\r\n * @param response The server side response returned from the getAccountInfo\r\n *     endpoint.\r\n * @constructor\r\n */\r\nvar UserRecord = /** @class */ (function () {\r\n    function UserRecord(response) {\r\n        // The Firebase user id is required.\r\n        if (!response.localId) {\r\n            throw new error_1.FirebaseAuthError(error_1.AuthClientErrorCode.INTERNAL_ERROR, 'INTERNAL ASSERT FAILED: Invalid user response');\r\n        }\r\n        utils.addReadonlyGetter(this, 'uid', response.localId);\r\n        utils.addReadonlyGetter(this, 'email', response.email);\r\n        utils.addReadonlyGetter(this, 'emailVerified', !!response.emailVerified);\r\n        utils.addReadonlyGetter(this, 'displayName', response.displayName);\r\n        utils.addReadonlyGetter(this, 'photoURL', response.photoUrl);\r\n        utils.addReadonlyGetter(this, 'phoneNumber', response.phoneNumber);\r\n        // If disabled is not provided, the account is enabled by default.\r\n        utils.addReadonlyGetter(this, 'disabled', response.disabled || false);\r\n        utils.addReadonlyGetter(this, 'metadata', new UserMetadata(response));\r\n        var providerData = [];\r\n        for (var _i = 0, _a = (response.providerUserInfo || []); _i < _a.length; _i++) {\r\n            var entry = _a[_i];\r\n            providerData.push(new UserInfo(entry));\r\n        }\r\n        utils.addReadonlyGetter(this, 'providerData', providerData);\r\n        // If the password hash is redacted (probably due to missing permissions)\r\n        // then clear it out, similar to how the salt is returned. (Otherwise, it\r\n        // *looks* like a b64-encoded hash is present, which is confusing.)\r\n        if (response.passwordHash === B64_REDACTED) {\r\n            utils.addReadonlyGetter(this, 'passwordHash', undefined);\r\n        }\r\n        else {\r\n            utils.addReadonlyGetter(this, 'passwordHash', response.passwordHash);\r\n        }\r\n        utils.addReadonlyGetter(this, 'passwordSalt', response.salt);\r\n        if (response.customAttributes) {\r\n            utils.addReadonlyGetter(this, 'customClaims', JSON.parse(response.customAttributes));\r\n        }\r\n        var validAfterTime = null;\r\n        // Convert validSince first to UTC milliseconds and then to UTC date string.\r\n        if (typeof response.validSince !== 'undefined') {\r\n            validAfterTime = parseDate(parseInt(response.validSince, 10) * 1000);\r\n        }\r\n        utils.addReadonlyGetter(this, 'tokensValidAfterTime', validAfterTime || undefined);\r\n        utils.addReadonlyGetter(this, 'tenantId', response.tenantId);\r\n        var multiFactor = new MultiFactor(response);\r\n        if (multiFactor.enrolledFactors.length > 0) {\r\n            utils.addReadonlyGetter(this, 'multiFactor', multiFactor);\r\n        }\r\n    }\r\n    /** @return The plain object representation of the user record. */\r\n    UserRecord.prototype.toJSON = function () {\r\n        var json = {\r\n            uid: this.uid,\r\n            email: this.email,\r\n            emailVerified: this.emailVerified,\r\n            displayName: this.displayName,\r\n            photoURL: this.photoURL,\r\n            phoneNumber: this.phoneNumber,\r\n            disabled: this.disabled,\r\n            // Convert metadata to json.\r\n            metadata: this.metadata.toJSON(),\r\n            passwordHash: this.passwordHash,\r\n            passwordSalt: this.passwordSalt,\r\n            customClaims: deep_copy_1.deepCopy(this.customClaims),\r\n            tokensValidAfterTime: this.tokensValidAfterTime,\r\n            tenantId: this.tenantId,\r\n        };\r\n        if (this.multiFactor) {\r\n            json.multiFactor = this.multiFactor.toJSON();\r\n        }\r\n        json.providerData = [];\r\n        for (var _i = 0, _a = this.providerData; _i < _a.length; _i++) {\r\n            var entry = _a[_i];\r\n            // Convert each provider data to json.\r\n            json.providerData.push(entry.toJSON());\r\n        }\r\n        return json;\r\n    };\r\n    return UserRecord;\r\n}());\r\nexports.UserRecord = UserRecord;\r\n"]},"metadata":{},"sourceType":"script"}