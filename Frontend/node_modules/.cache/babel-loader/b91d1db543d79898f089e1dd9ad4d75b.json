{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\PROJECT ALL\\\\MonkeyFruad\\\\Frontend\\\\src\\\\user\\\\components\\\\formpost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { Form, Col, Image, roundedCircle } from \"react-bootstrap\";\nimport { useHistory, Redirect } from \"react-router-dom\";\nimport { storage } from \"../Frontfirebase\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./formpost.css\";\nimport usercontext from \"../context/usercontext\";\nimport Axios from \"axios\";\nimport _ from \"lodash\";\nimport { auth, googleProvider, facebookProvider } from \"../Frontfirebase\";\n\nconst Formpost = () => {\n  _s();\n\n  // เก็บ State ทุก Input เพื่อส่งไปหลังบ้าน\n  const [imagesFile, setImagesFile] = useState([]); //สร้าง State เพื่อเก็บไฟล์ที่อัพโหลด\n\n  const [imagesProfile, setImagesProfile] = useState(\"/img/profile.png\"); //สร้าง State เพื่อเก็บรูปโปรไฟล์\n\n  const [files, Setfiles] = useState(\"\");\n  const [photo, Setphoto] = useState(\"\");\n  const [name, setName] = useState();\n  const [surname, setSurname] = useState();\n  const [id, setId] = useState();\n  const [accountnumber, setAccountnumber] = useState();\n  const [nameproduct, setNameproduct] = useState();\n  const [productcategory, setProductcategory] = useState();\n  const [money, setMoney] = useState();\n  const [bank, setBank] = useState();\n  const [datetime, setDatetime] = useState();\n  const [social, setSocial] = useState();\n  const [other, setOther] = useState(\"\");\n  const [error, Seterror] = useState();\n  const [user2, Setuser2] = useState(); // let { user , setUser} = useContext(usercontext)\n\n  const ImageHoverZoom = ({\n    imagePreviewUrl\n  }) => {}; // ฟังก์ชันเปลี่ยนรูปโปร\n\n\n  const ProfileChange = event => {\n    event.preventDefault(); // ใส่ไว้ไม่ให้ refresh หน้าเว็บ\n\n    let files = event.target.files; //ใช้เพื่อแสดงไฟลทั้งหมดที่กดเลือกไฟล\n\n    Setphoto(files[0]);\n    let reader = new FileReader(); //ใช้ Class  FileReader เป็นตัวอ่านไฟล์\n\n    reader.readAsDataURL(files[0]); //เป็นคำสั่งสำหรับการแปลง url มาเป็น file\n\n    reader.onloadend = () => {\n      setImagesProfile(reader.result); // ใส่ข้อมูลเข้าไปยัง state ผาน setImagesProfile\n    };\n  }; // ฟังก์ชันอัพโหลดไฟล์ \n\n\n  const FileUpload = event => {\n    event.preventDefault(); // ใส่ไว้ไม่ให้ refresh หน้าเว็บ\n\n    setImagesFile([]); // reset state รูป เพื่อกันในกรณีที่กดเลือกไฟล์ซ้ำแล้วรูปต่อกันจากอันเดิม\n\n    let files = event.target.files; //ใช้เพื่อแสดงไฟลทั้งหมดที่กดเลือกไฟล\n\n    Setfiles(files);\n    Seterror(); //ทำการวนข้อมูลภายใน Array\n\n    for (var i = 0; i < files.length; i++) {\n      let reader = new FileReader(); //ใช้ Class  FileReader เป็นตัวอ่านไฟล์\n\n      reader.readAsDataURL(files[i]); //เป็นคำสั่งสำหรับการแปลง url มาเป็น file\n\n      reader.onloadend = () => {\n        // ใส่ข้อมูลเข้าไปยัง state ผาน  setimagesPreviewUrls\n        setImagesFile(prevState => [...prevState, reader.result]); //  PrevState เป็น Parameter ในการเรียก State ก่อนหน้ามาแล้วรวม Array กับ fileที่อัพโหลดเข้ามา\n      };\n    }\n  };\n\n  let user = auth.currentUser;\n  let history = useHistory();\n\n  const ok = async () => {\n    Setuser2(user);\n  };\n\n  useEffect(() => {\n    ok();\n  }, []);\n\n  const handlesubmit = async e => {\n    try {\n      e.preventDefault();\n      let formdata = new FormData();\n      let useruid = user.uid;\n\n      _.forEach(files, file => {\n        formdata.append(\"eiei\", file);\n      });\n\n      formdata.append(\"photo\", photo);\n      formdata.append(\"name\", name);\n      formdata.append(\"surname\", surname);\n      formdata.append(\"id\", id);\n      formdata.append(\"accountnumber\", accountnumber);\n      formdata.append(\"nameproduct\", nameproduct);\n      formdata.append(\"productcategory\", productcategory);\n      formdata.append(\"money\", money);\n      formdata.append(\"bank\", bank);\n      formdata.append(\"datetime\", datetime);\n      formdata.append(\"social\", social);\n      formdata.append(\"other\", other);\n      formdata.append(\"useruid\", useruid);\n      let data = await Axios.post(\"http://localhost:7000/post/create\", formdata); // console.log(\"ok\")\n\n      history.push(\"/post/history\");\n    } catch (err) {\n      err && Seterror(err.response.data.msg);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: user2 ? /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 16\n    }, this) : \"uck\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Formpost, \"yuqLoLhogxCrSJUE2iUDYT3a5F4=\", false, function () {\n  return [useHistory];\n});\n\n_c = Formpost;\nexport default Formpost;\n\nvar _c;\n\n$RefreshReg$(_c, \"Formpost\");","map":{"version":3,"sources":["D:/PROJECT ALL/MonkeyFruad/Frontend/src/user/components/formpost.js"],"names":["React","useState","useContext","useEffect","Form","Col","Image","roundedCircle","useHistory","Redirect","storage","usercontext","Axios","_","auth","googleProvider","facebookProvider","Formpost","imagesFile","setImagesFile","imagesProfile","setImagesProfile","files","Setfiles","photo","Setphoto","name","setName","surname","setSurname","id","setId","accountnumber","setAccountnumber","nameproduct","setNameproduct","productcategory","setProductcategory","money","setMoney","bank","setBank","datetime","setDatetime","social","setSocial","other","setOther","error","Seterror","user2","Setuser2","ImageHoverZoom","imagePreviewUrl","ProfileChange","event","preventDefault","target","reader","FileReader","readAsDataURL","onloadend","result","FileUpload","i","length","prevState","user","currentUser","history","ok","handlesubmit","e","formdata","FormData","useruid","uid","forEach","file","append","data","post","push","err","response","msg"],"mappings":"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","sourcesContent":["import React, { useState ,useContext , useEffect} from \"react\";\r\nimport { Form, Col, Image, roundedCircle } from \"react-bootstrap\";\r\nimport {useHistory , Redirect} from \"react-router-dom\";\r\nimport {storage} from \"../Frontfirebase\"\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./formpost.css\";\r\nimport usercontext from \"../context/usercontext\"\r\nimport Axios from \"axios\"\r\nimport _ from \"lodash\"\r\nimport { auth, googleProvider, facebookProvider } from \"../Frontfirebase\";\r\n\r\n\r\n\r\n\r\nconst Formpost = () => {\r\n\r\n  // เก็บ State ทุก Input เพื่อส่งไปหลังบ้าน\r\n  \r\n  const [imagesFile, setImagesFile] = useState([]); //สร้าง State เพื่อเก็บไฟล์ที่อัพโหลด\r\n  const [imagesProfile, setImagesProfile] = useState(\"/img/profile.png\"); //สร้าง State เพื่อเก็บรูปโปรไฟล์\r\n  const [files, Setfiles] = useState(\"\");\r\n  const [photo, Setphoto] = useState(\"\");\r\n  const [name, setName] = useState();\r\n  const [surname, setSurname] = useState();\r\n  const [id, setId] = useState();\r\n  const [accountnumber, setAccountnumber] = useState();\r\n  const [nameproduct, setNameproduct] = useState();\r\n  const [productcategory, setProductcategory] = useState();\r\n  const [money, setMoney] = useState();\r\n  const [bank, setBank] = useState();\r\n  const [datetime, setDatetime] = useState();\r\n  const [social, setSocial] = useState();\r\n  const [other, setOther] = useState(\"\");\r\n  const [error, Seterror] = useState();\r\n  const [user2, Setuser2] = useState();\r\n  // let { user , setUser} = useContext(usercontext)\r\n  const ImageHoverZoom = ({ imagePreviewUrl }) => {\r\n    \r\n  }\r\n\r\n\r\n\r\n  // ฟังก์ชันเปลี่ยนรูปโปร\r\n  const ProfileChange = (event) => {  \r\n  \r\n    event.preventDefault(); // ใส่ไว้ไม่ให้ refresh หน้าเว็บ\r\n    let files = event.target.files; //ใช้เพื่อแสดงไฟลทั้งหมดที่กดเลือกไฟล\r\n    Setphoto(files[0])\r\n    let reader = new FileReader(); //ใช้ Class  FileReader เป็นตัวอ่านไฟล์\r\n    reader.readAsDataURL(files[0]); //เป็นคำสั่งสำหรับการแปลง url มาเป็น file\r\n    reader.onloadend = () => {\r\n      setImagesProfile(reader.result); // ใส่ข้อมูลเข้าไปยัง state ผาน setImagesProfile\r\n    };\r\n\r\n  };\r\n\r\n// ฟังก์ชันอัพโหลดไฟล์ \r\n  const FileUpload = (event) => { \r\n    event.preventDefault(); // ใส่ไว้ไม่ให้ refresh หน้าเว็บ\r\n    setImagesFile([]); // reset state รูป เพื่อกันในกรณีที่กดเลือกไฟล์ซ้ำแล้วรูปต่อกันจากอันเดิม\r\n    let files = event.target.files; //ใช้เพื่อแสดงไฟลทั้งหมดที่กดเลือกไฟล\r\n    Setfiles(files)\r\n    Seterror()\r\n\r\n    //ทำการวนข้อมูลภายใน Array\r\n    for (var i = 0; i < files.length; i++) {\r\n      let reader = new FileReader(); //ใช้ Class  FileReader เป็นตัวอ่านไฟล์\r\n      reader.readAsDataURL(files[i]); //เป็นคำสั่งสำหรับการแปลง url มาเป็น file\r\n      reader.onloadend = () => {\r\n        // ใส่ข้อมูลเข้าไปยัง state ผาน  setimagesPreviewUrls\r\n        setImagesFile((prevState) => [...prevState, reader.result]);\r\n        //  PrevState เป็น Parameter ในการเรียก State ก่อนหน้ามาแล้วรวม Array กับ fileที่อัพโหลดเข้ามา\r\n      };\r\n    }\r\n     \r\n  };\r\n\r\n\r\n\r\nlet user = auth.currentUser;\r\nlet history = useHistory()\r\n\r\n \r\nconst ok = async () =>{\r\n  \r\n  Setuser2(user)\r\n}\r\n \r\n useEffect(() => {\r\n   ok()\r\n }, [])\r\n \r\n\r\n  const handlesubmit = async (e) =>{\r\n    try{\r\n      e.preventDefault()\r\n      \r\n        let formdata = new FormData()\r\n      let useruid = user.uid\r\n      _.forEach(files , file =>{\r\n        formdata.append(\"eiei\" , file)\r\n      })\r\n      formdata.append(\"photo\" , photo)\r\n      formdata.append(\"name\" , name)\r\n      formdata.append(\"surname\" , surname)\r\n      formdata.append(\"id\" , id)\r\n      formdata.append(\"accountnumber\" , accountnumber)\r\n      formdata.append(\"nameproduct\" , nameproduct)\r\n      formdata.append(\"productcategory\" , productcategory)\r\n      formdata.append(\"money\" , money)\r\n      formdata.append(\"bank\" , bank)\r\n      formdata.append(\"datetime\" , datetime)\r\n      formdata.append(\"social\" , social)\r\n      formdata.append(\"other\" , other)\r\n      formdata.append(\"useruid\" , useruid)\r\n      \r\n      let data = await Axios.post(\"http://localhost:7000/post/create\", formdata ) \r\n      // console.log(\"ok\")\r\n        history.push(\"/post/history\")\r\n     \r\n    }catch(err){\r\n      err && Seterror(err.response.data.msg)\r\n    \r\n    }\r\n  }\r\n\r\n  \r\n  return (\r\n    <div>\r\n      {user2 ? <Redirect to=\"/login\" /> : \"uck\"}\r\n   \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Formpost;\r\n"]},"metadata":{},"sourceType":"module"}