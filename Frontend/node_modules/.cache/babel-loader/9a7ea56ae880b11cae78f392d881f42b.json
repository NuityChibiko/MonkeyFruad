{"ast":null,"code":"/**\r\n * Module dependencies.\r\n */\n//var http = require('http')\n//  , req = http.IncomingMessage.prototype;\nvar req = exports = module.exports = {};\n/**\r\n * Initiate a login session for `user`.\r\n *\r\n * Options:\r\n *   - `session`  Save login state in session, defaults to _true_\r\n *\r\n * Examples:\r\n *\r\n *     req.logIn(user, { session: false });\r\n *\r\n *     req.logIn(user, function(err) {\r\n *       if (err) { throw err; }\r\n *       // session saved\r\n *     });\r\n *\r\n * @param {User} user\r\n * @param {Object} options\r\n * @param {Function} done\r\n * @api public\r\n */\n\nreq.login = req.logIn = function (user, options, done) {\n  if (typeof options == 'function') {\n    done = options;\n    options = {};\n  }\n\n  options = options || {};\n  var property = 'user';\n\n  if (this._passport && this._passport.instance) {\n    property = this._passport.instance._userProperty || 'user';\n  }\n\n  var session = options.session === undefined ? true : options.session;\n  this[property] = user;\n\n  if (session) {\n    if (!this._passport) {\n      throw new Error('passport.initialize() middleware not in use');\n    }\n\n    if (typeof done != 'function') {\n      throw new Error('req#login requires a callback function');\n    }\n\n    var self = this;\n\n    this._passport.instance._sm.logIn(this, user, function (err) {\n      if (err) {\n        self[property] = null;\n        return done(err);\n      }\n\n      done();\n    });\n  } else {\n    done && done();\n  }\n};\n/**\r\n * Terminate an existing login session.\r\n *\r\n * @api public\r\n */\n\n\nreq.logout = req.logOut = function () {\n  var property = 'user';\n\n  if (this._passport && this._passport.instance) {\n    property = this._passport.instance._userProperty || 'user';\n  }\n\n  this[property] = null;\n\n  if (this._passport) {\n    this._passport.instance._sm.logOut(this);\n  }\n};\n/**\r\n * Test if request is authenticated.\r\n *\r\n * @return {Boolean}\r\n * @api public\r\n */\n\n\nreq.isAuthenticated = function () {\n  var property = 'user';\n\n  if (this._passport && this._passport.instance) {\n    property = this._passport.instance._userProperty || 'user';\n  }\n\n  return this[property] ? true : false;\n};\n/**\r\n * Test if request is unauthenticated.\r\n *\r\n * @return {Boolean}\r\n * @api public\r\n */\n\n\nreq.isUnauthenticated = function () {\n  return !this.isAuthenticated();\n};","map":{"version":3,"sources":["D:/PROJECT ALL/MonkeyFruad/Backend/node_modules/passport/lib/http/request.js"],"names":["req","exports","module","login","logIn","user","options","done","property","_passport","instance","_userProperty","session","undefined","Error","self","_sm","err","logout","logOut","isAuthenticated","isUnauthenticated"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAGA,IAAIA,GAAG,GAAGC,OAAO,GAAGC,MAAM,CAACD,OAAP,GAAiB,EAArC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAD,GAAG,CAACG,KAAJ,GACAH,GAAG,CAACI,KAAJ,GAAY,UAASC,IAAT,EAAeC,OAAf,EAAwBC,IAAxB,EAA8B;AACxC,MAAI,OAAOD,OAAP,IAAkB,UAAtB,EAAkC;AAChCC,IAAAA,IAAI,GAAGD,OAAP;AACAA,IAAAA,OAAO,GAAG,EAAV;AACD;;AACDA,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,MAAIE,QAAQ,GAAG,MAAf;;AACA,MAAI,KAAKC,SAAL,IAAkB,KAAKA,SAAL,CAAeC,QAArC,EAA+C;AAC7CF,IAAAA,QAAQ,GAAG,KAAKC,SAAL,CAAeC,QAAf,CAAwBC,aAAxB,IAAyC,MAApD;AACD;;AACD,MAAIC,OAAO,GAAIN,OAAO,CAACM,OAAR,KAAoBC,SAArB,GAAkC,IAAlC,GAAyCP,OAAO,CAACM,OAA/D;AAEA,OAAKJ,QAAL,IAAiBH,IAAjB;;AACA,MAAIO,OAAJ,EAAa;AACX,QAAI,CAAC,KAAKH,SAAV,EAAqB;AAAE,YAAM,IAAIK,KAAJ,CAAU,6CAAV,CAAN;AAAiE;;AACxF,QAAI,OAAOP,IAAP,IAAe,UAAnB,EAA+B;AAAE,YAAM,IAAIO,KAAJ,CAAU,wCAAV,CAAN;AAA4D;;AAE7F,QAAIC,IAAI,GAAG,IAAX;;AACA,SAAKN,SAAL,CAAeC,QAAf,CAAwBM,GAAxB,CAA4BZ,KAA5B,CAAkC,IAAlC,EAAwCC,IAAxC,EAA8C,UAASY,GAAT,EAAc;AAC1D,UAAIA,GAAJ,EAAS;AAAEF,QAAAA,IAAI,CAACP,QAAD,CAAJ,GAAiB,IAAjB;AAAuB,eAAOD,IAAI,CAACU,GAAD,CAAX;AAAmB;;AACrDV,MAAAA,IAAI;AACL,KAHD;AAID,GATD,MASO;AACLA,IAAAA,IAAI,IAAIA,IAAI,EAAZ;AACD;AACF,CA3BD;AA6BA;AACA;AACA;AACA;AACA;;;AACAP,GAAG,CAACkB,MAAJ,GACAlB,GAAG,CAACmB,MAAJ,GAAa,YAAW;AACtB,MAAIX,QAAQ,GAAG,MAAf;;AACA,MAAI,KAAKC,SAAL,IAAkB,KAAKA,SAAL,CAAeC,QAArC,EAA+C;AAC7CF,IAAAA,QAAQ,GAAG,KAAKC,SAAL,CAAeC,QAAf,CAAwBC,aAAxB,IAAyC,MAApD;AACD;;AAED,OAAKH,QAAL,IAAiB,IAAjB;;AACA,MAAI,KAAKC,SAAT,EAAoB;AAClB,SAAKA,SAAL,CAAeC,QAAf,CAAwBM,GAAxB,CAA4BG,MAA5B,CAAmC,IAAnC;AACD;AACF,CAXD;AAaA;AACA;AACA;AACA;AACA;AACA;;;AACAnB,GAAG,CAACoB,eAAJ,GAAsB,YAAW;AAC/B,MAAIZ,QAAQ,GAAG,MAAf;;AACA,MAAI,KAAKC,SAAL,IAAkB,KAAKA,SAAL,CAAeC,QAArC,EAA+C;AAC7CF,IAAAA,QAAQ,GAAG,KAAKC,SAAL,CAAeC,QAAf,CAAwBC,aAAxB,IAAyC,MAApD;AACD;;AAED,SAAQ,KAAKH,QAAL,CAAD,GAAmB,IAAnB,GAA0B,KAAjC;AACD,CAPD;AASA;AACA;AACA;AACA;AACA;AACA;;;AACAR,GAAG,CAACqB,iBAAJ,GAAwB,YAAW;AACjC,SAAO,CAAC,KAAKD,eAAL,EAAR;AACD,CAFD","sourcesContent":["/**\r\n * Module dependencies.\r\n */\r\n//var http = require('http')\r\n//  , req = http.IncomingMessage.prototype;\r\n\r\n\r\nvar req = exports = module.exports = {};\r\n\r\n/**\r\n * Initiate a login session for `user`.\r\n *\r\n * Options:\r\n *   - `session`  Save login state in session, defaults to _true_\r\n *\r\n * Examples:\r\n *\r\n *     req.logIn(user, { session: false });\r\n *\r\n *     req.logIn(user, function(err) {\r\n *       if (err) { throw err; }\r\n *       // session saved\r\n *     });\r\n *\r\n * @param {User} user\r\n * @param {Object} options\r\n * @param {Function} done\r\n * @api public\r\n */\r\nreq.login =\r\nreq.logIn = function(user, options, done) {\r\n  if (typeof options == 'function') {\r\n    done = options;\r\n    options = {};\r\n  }\r\n  options = options || {};\r\n  \r\n  var property = 'user';\r\n  if (this._passport && this._passport.instance) {\r\n    property = this._passport.instance._userProperty || 'user';\r\n  }\r\n  var session = (options.session === undefined) ? true : options.session;\r\n  \r\n  this[property] = user;\r\n  if (session) {\r\n    if (!this._passport) { throw new Error('passport.initialize() middleware not in use'); }\r\n    if (typeof done != 'function') { throw new Error('req#login requires a callback function'); }\r\n    \r\n    var self = this;\r\n    this._passport.instance._sm.logIn(this, user, function(err) {\r\n      if (err) { self[property] = null; return done(err); }\r\n      done();\r\n    });\r\n  } else {\r\n    done && done();\r\n  }\r\n};\r\n\r\n/**\r\n * Terminate an existing login session.\r\n *\r\n * @api public\r\n */\r\nreq.logout =\r\nreq.logOut = function() {\r\n  var property = 'user';\r\n  if (this._passport && this._passport.instance) {\r\n    property = this._passport.instance._userProperty || 'user';\r\n  }\r\n  \r\n  this[property] = null;\r\n  if (this._passport) {\r\n    this._passport.instance._sm.logOut(this);\r\n  }\r\n};\r\n\r\n/**\r\n * Test if request is authenticated.\r\n *\r\n * @return {Boolean}\r\n * @api public\r\n */\r\nreq.isAuthenticated = function() {\r\n  var property = 'user';\r\n  if (this._passport && this._passport.instance) {\r\n    property = this._passport.instance._userProperty || 'user';\r\n  }\r\n  \r\n  return (this[property]) ? true : false;\r\n};\r\n\r\n/**\r\n * Test if request is unauthenticated.\r\n *\r\n * @return {Boolean}\r\n * @api public\r\n */\r\nreq.isUnauthenticated = function() {\r\n  return !this.isAuthenticated();\r\n};\r\n"]},"metadata":{},"sourceType":"script"}