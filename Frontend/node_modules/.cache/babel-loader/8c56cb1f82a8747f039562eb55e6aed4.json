{"ast":null,"code":"/*! firebase-admin v9.4.2 */\n\"use strict\";\n/*!\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getErrorCode = exports.createFirebaseError = void 0;\n\nvar error_1 = require(\"../utils/error\");\n\nvar validator = require(\"../utils/validator\");\n/**\r\n * Creates a new FirebaseMessagingError by extracting the error code, message and other relevant\r\n * details from an HTTP error response.\r\n *\r\n * @param {HttpError} err The HttpError to convert into a Firebase error\r\n * @return {FirebaseMessagingError} A Firebase error that can be returned to the user.\r\n */\n\n\nfunction createFirebaseError(err) {\n  if (err.response.isJson()) {\n    // For JSON responses, map the server response to a client-side error.\n    var json = err.response.data;\n    var errorCode = getErrorCode(json);\n    var errorMessage = getErrorMessage(json);\n    return error_1.FirebaseMessagingError.fromServerError(errorCode, errorMessage, json);\n  } // Non-JSON response\n\n\n  var error;\n\n  switch (err.response.status) {\n    case 400:\n      error = error_1.MessagingClientErrorCode.INVALID_ARGUMENT;\n      break;\n\n    case 401:\n    case 403:\n      error = error_1.MessagingClientErrorCode.AUTHENTICATION_ERROR;\n      break;\n\n    case 500:\n      error = error_1.MessagingClientErrorCode.INTERNAL_ERROR;\n      break;\n\n    case 503:\n      error = error_1.MessagingClientErrorCode.SERVER_UNAVAILABLE;\n      break;\n\n    default:\n      // Treat non-JSON responses with unexpected status codes as unknown errors.\n      error = error_1.MessagingClientErrorCode.UNKNOWN_ERROR;\n  }\n\n  return new error_1.FirebaseMessagingError({\n    code: error.code,\n    message: error.message + \" Raw server response: \\\"\" + err.response.text + \"\\\". Status code: \" + (err.response.status + \".\")\n  });\n}\n\nexports.createFirebaseError = createFirebaseError;\n/**\r\n * @param {object} response The response to check for errors.\r\n * @return {string|null} The error code if present; null otherwise.\r\n */\n\nfunction getErrorCode(response) {\n  if (validator.isNonNullObject(response) && 'error' in response) {\n    var error = response.error;\n\n    if (validator.isString(error)) {\n      return error;\n    }\n\n    if (validator.isArray(error.details)) {\n      var fcmErrorType = 'type.googleapis.com/google.firebase.fcm.v1.FcmError';\n\n      for (var _i = 0, _a = error.details; _i < _a.length; _i++) {\n        var element = _a[_i];\n\n        if (element['@type'] === fcmErrorType) {\n          return element.errorCode;\n        }\n      }\n    }\n\n    if ('status' in error) {\n      return error.status;\n    } else {\n      return error.message;\n    }\n  }\n\n  return null;\n}\n\nexports.getErrorCode = getErrorCode;\n/**\r\n * Extracts error message from the given response object.\r\n *\r\n * @param {object} response The response to check for errors.\r\n * @return {string|null} The error message if present; null otherwise.\r\n */\n\nfunction getErrorMessage(response) {\n  if (validator.isNonNullObject(response) && 'error' in response && validator.isNonEmptyString(response.error.message)) {\n    return response.error.message;\n  }\n\n  return null;\n}","map":{"version":3,"sources":["D:/PROJECT ALL/MonkeyFruad/Backend/node_modules/firebase-admin/lib/messaging/messaging-errors-internal.js"],"names":["Object","defineProperty","exports","value","getErrorCode","createFirebaseError","error_1","require","validator","err","response","isJson","json","data","errorCode","errorMessage","getErrorMessage","FirebaseMessagingError","fromServerError","error","status","MessagingClientErrorCode","INVALID_ARGUMENT","AUTHENTICATION_ERROR","INTERNAL_ERROR","SERVER_UNAVAILABLE","UNKNOWN_ERROR","code","message","text","isNonNullObject","isString","isArray","details","fcmErrorType","_i","_a","length","element","isNonEmptyString"],"mappings":"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","sourcesContent":["/*! firebase-admin v9.4.2 */\r\n\"use strict\";\r\n/*!\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getErrorCode = exports.createFirebaseError = void 0;\r\nvar error_1 = require(\"../utils/error\");\r\nvar validator = require(\"../utils/validator\");\r\n/**\r\n * Creates a new FirebaseMessagingError by extracting the error code, message and other relevant\r\n * details from an HTTP error response.\r\n *\r\n * @param {HttpError} err The HttpError to convert into a Firebase error\r\n * @return {FirebaseMessagingError} A Firebase error that can be returned to the user.\r\n */\r\nfunction createFirebaseError(err) {\r\n    if (err.response.isJson()) {\r\n        // For JSON responses, map the server response to a client-side error.\r\n        var json = err.response.data;\r\n        var errorCode = getErrorCode(json);\r\n        var errorMessage = getErrorMessage(json);\r\n        return error_1.FirebaseMessagingError.fromServerError(errorCode, errorMessage, json);\r\n    }\r\n    // Non-JSON response\r\n    var error;\r\n    switch (err.response.status) {\r\n        case 400:\r\n            error = error_1.MessagingClientErrorCode.INVALID_ARGUMENT;\r\n            break;\r\n        case 401:\r\n        case 403:\r\n            error = error_1.MessagingClientErrorCode.AUTHENTICATION_ERROR;\r\n            break;\r\n        case 500:\r\n            error = error_1.MessagingClientErrorCode.INTERNAL_ERROR;\r\n            break;\r\n        case 503:\r\n            error = error_1.MessagingClientErrorCode.SERVER_UNAVAILABLE;\r\n            break;\r\n        default:\r\n            // Treat non-JSON responses with unexpected status codes as unknown errors.\r\n            error = error_1.MessagingClientErrorCode.UNKNOWN_ERROR;\r\n    }\r\n    return new error_1.FirebaseMessagingError({\r\n        code: error.code,\r\n        message: error.message + \" Raw server response: \\\"\" + err.response.text + \"\\\". Status code: \" +\r\n            (err.response.status + \".\"),\r\n    });\r\n}\r\nexports.createFirebaseError = createFirebaseError;\r\n/**\r\n * @param {object} response The response to check for errors.\r\n * @return {string|null} The error code if present; null otherwise.\r\n */\r\nfunction getErrorCode(response) {\r\n    if (validator.isNonNullObject(response) && 'error' in response) {\r\n        var error = response.error;\r\n        if (validator.isString(error)) {\r\n            return error;\r\n        }\r\n        if (validator.isArray(error.details)) {\r\n            var fcmErrorType = 'type.googleapis.com/google.firebase.fcm.v1.FcmError';\r\n            for (var _i = 0, _a = error.details; _i < _a.length; _i++) {\r\n                var element = _a[_i];\r\n                if (element['@type'] === fcmErrorType) {\r\n                    return element.errorCode;\r\n                }\r\n            }\r\n        }\r\n        if ('status' in error) {\r\n            return error.status;\r\n        }\r\n        else {\r\n            return error.message;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexports.getErrorCode = getErrorCode;\r\n/**\r\n * Extracts error message from the given response object.\r\n *\r\n * @param {object} response The response to check for errors.\r\n * @return {string|null} The error message if present; null otherwise.\r\n */\r\nfunction getErrorMessage(response) {\r\n    if (validator.isNonNullObject(response) &&\r\n        'error' in response &&\r\n        validator.isNonEmptyString(response.error.message)) {\r\n        return response.error.message;\r\n    }\r\n    return null;\r\n}\r\n"]},"metadata":{},"sourceType":"script"}