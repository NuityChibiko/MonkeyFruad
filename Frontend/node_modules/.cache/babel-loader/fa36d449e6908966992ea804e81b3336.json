{"ast":null,"code":"\"use strict\";\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nvar _ = require('lodash');\n\nexports.config = require(\"./config\");\nexports.utils = require(\"./utils\");\nexports.uploader = require(\"./uploader\");\nexports.api = require(\"./api\");\n\nvar account = require(\"./provisioning/account\");\n\nexports.provisioning = {\n  account: account\n};\nexports.PreloadedFile = require(\"./preloaded_file\");\nexports.Cache = require('./cache');\nvar cloudinary = module.exports;\nvar optionConsume = cloudinary.utils.option_consume;\n\nexports.url = function url(public_id, options) {\n  options = _.extend({}, options);\n  return cloudinary.utils.url(public_id, options);\n};\n\nvar _require = require('./utils/srcsetUtils'),\n    generateImageResponsiveAttributes = _require.generateImageResponsiveAttributes,\n    generateMediaAttr = _require.generateMediaAttr;\n/**\r\n * Helper function, allows chaining transformation to the end of transformation list\r\n *\r\n * @private\r\n * @param {object} options Original options\r\n * @param {object|object[]} transformation Transformations to chain at the end\r\n *\r\n * @return {object} Resulting options\r\n */\n\n\nfunction chainTransformations(options) {\n  var transformation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : []; // preserve url options\n\n  var urlOptions = cloudinary.utils.extractUrlParams(options);\n  var currentTransformation = cloudinary.utils.extractTransformationParams(options);\n  transformation = cloudinary.utils.build_array(transformation);\n  urlOptions.transformation = [currentTransformation].concat(_toConsumableArray(transformation));\n  return urlOptions;\n}\n/**\r\n * Generate an HTML img tag with a Cloudinary URL\r\n * @param {string} source A Public ID or a URL\r\n * @param {object} options Configuration options\r\n * @param {srcset} options.srcset srcset options\r\n * @param {object} options.attributes HTML attributes\r\n * @param {number} options.html_width (deprecated) The HTML tag width\r\n * @param {number} options.html_height (deprecated) The HTML tag height\r\n * @param {boolean} options.client_hints Don't implement the client side responsive function.\r\n *                  This argument can override the the same option in the global configuration.\r\n * @param {boolean} options.responsive Setup the tag for the client side responsive function.\r\n * @param {boolean} options.hidpi Setup the tag for the client side auto dpr function.\r\n * @param {boolean} options.responsive_placeholder A place holder image URL to use with.\r\n *                  the client side responsive function\r\n * @return {string} An HTML img tag\r\n */\n\n\nexports.image = function image(source, options) {\n  var localOptions = _.extend({}, options);\n\n  var srcsetParam = optionConsume(localOptions, 'srcset');\n  var attributes = optionConsume(localOptions, 'attributes', {});\n  var src = cloudinary.utils.url(source, localOptions);\n  if (\"html_width\" in localOptions) localOptions.width = optionConsume(localOptions, \"html_width\");\n  if (\"html_height\" in localOptions) localOptions.height = optionConsume(localOptions, \"html_height\");\n  var client_hints = optionConsume(localOptions, \"client_hints\", cloudinary.config().client_hints);\n  var responsive = optionConsume(localOptions, \"responsive\");\n  var hidpi = optionConsume(localOptions, \"hidpi\");\n\n  if ((responsive || hidpi) && !client_hints) {\n    localOptions[\"data-src\"] = src;\n    var classes = [responsive ? \"cld-responsive\" : \"cld-hidpi\"];\n    var current_class = optionConsume(localOptions, \"class\");\n    if (current_class) classes.push(current_class);\n    localOptions.class = classes.join(\" \");\n    src = optionConsume(localOptions, \"responsive_placeholder\", cloudinary.config().responsive_placeholder);\n\n    if (src === \"blank\") {\n      src = cloudinary.BLANK;\n    }\n  }\n\n  var html = \"<img \";\n  if (src) html += \"src='\" + src + \"' \";\n  var responsiveAttributes = {};\n\n  if (cloudinary.utils.isString(srcsetParam)) {\n    responsiveAttributes.srcset = srcsetParam;\n  } else {\n    responsiveAttributes = generateImageResponsiveAttributes(source, attributes, srcsetParam, options);\n  }\n\n  if (!cloudinary.utils.isEmpty(responsiveAttributes)) {\n    delete localOptions.width;\n    delete localOptions.height;\n  }\n\n  html += cloudinary.utils.html_attrs(_.extend(localOptions, responsiveAttributes, attributes)) + \"/>\";\n  return html;\n};\n/**\r\n * Creates an HTML video tag for the provided public_id\r\n * @param {String} public_id the resource public ID\r\n * @param {Object} [options] options for the resource and HTML tag\r\n * @param {(String|Array<String>)} [options.source_types] Specify which\r\n *        source type the tag should include. defaults to webm, mp4 and ogv.\r\n * @param {String} [options.source_transformation] specific transformations\r\n *        to use for a specific source type.\r\n * @param {(String|Object)} [options.poster] image URL or\r\n *        poster options that may include a <tt>public_id</tt> key and\r\n *        poster-specific transformations\r\n * @example <caption>Example of generating a video tag:</caption>\r\n * cloudinary.video(\"mymovie.mp4\");\r\n * cloudinary.video(\"mymovie.mp4\", {source_types: 'webm'});\r\n * cloudinary.video(\"mymovie.ogv\", {poster: \"myspecialplaceholder.jpg\"});\r\n * cloudinary.video(\"mymovie.webm\", {source_types: ['webm', 'mp4'], poster: {effect: 'sepia'}});\r\n * @return {string} HTML video tag\r\n */\n\n\nexports.video = function video(public_id, options) {\n  options = _.extend({}, options);\n  public_id = public_id.replace(/\\.(mp4|ogv|webm)$/, '');\n  var source_types = optionConsume(options, 'source_types', []);\n  var source_transformation = optionConsume(options, 'source_transformation', {});\n  var sources = optionConsume(options, 'sources', []);\n  var fallback = optionConsume(options, 'fallback_content', '');\n  if (source_types.length === 0) source_types = cloudinary.utils.DEFAULT_VIDEO_SOURCE_TYPES;\n\n  var video_options = _.cloneDeep(options);\n\n  if (video_options.hasOwnProperty('poster')) {\n    if (_.isPlainObject(video_options.poster)) {\n      if (video_options.poster.hasOwnProperty('public_id')) {\n        video_options.poster = cloudinary.utils.url(video_options.poster.public_id, video_options.poster);\n      } else {\n        video_options.poster = cloudinary.utils.url(public_id, _.extend({}, cloudinary.utils.DEFAULT_POSTER_OPTIONS, video_options.poster));\n      }\n    }\n  } else {\n    video_options.poster = cloudinary.utils.url(public_id, _.extend({}, cloudinary.utils.DEFAULT_POSTER_OPTIONS, options));\n  }\n\n  if (!video_options.poster) delete video_options.poster;\n  var html = '<video ';\n  if (!video_options.hasOwnProperty('resource_type')) video_options.resource_type = 'video';\n  var multi_source_types = _.isArray(source_types) && source_types.length > 1;\n  var has_sources = _.isArray(sources) && sources.length > 0;\n  var source = public_id;\n\n  if (!multi_source_types && !has_sources) {\n    source = source + '.' + cloudinary.utils.build_array(source_types)[0];\n  }\n\n  var src = cloudinary.utils.url(source, video_options);\n  if (!multi_source_types && !has_sources) video_options.src = src;\n  if (video_options.hasOwnProperty(\"html_width\")) video_options.width = optionConsume(video_options, 'html_width');\n  if (video_options.hasOwnProperty(\"html_height\")) video_options.height = optionConsume(video_options, 'html_height');\n  html = html + cloudinary.utils.html_attrs(video_options) + '>';\n\n  if (multi_source_types && !has_sources) {\n    sources = source_types.map(function (source_type) {\n      return {\n        type: source_type,\n        transformations: source_transformation[source_type] || {}\n      };\n    });\n  }\n\n  if (_.isArray(sources) && sources.length > 0) {\n    html += sources.map(function (source_data) {\n      var source_type = source_data.type;\n      var codecs = source_data.codecs;\n      var transformation = source_data.transformations || {};\n      src = cloudinary.utils.url(source + \".\" + source_type, _.extend({\n        resource_type: 'video'\n      }, _.cloneDeep(options), _.cloneDeep(transformation)));\n      return cloudinary.utils.create_source_tag(src, source_type, codecs);\n    }).join('');\n  }\n\n  return `${html}${fallback}</video>`;\n};\n/**\r\n * Generate a <code>source</code> tag.\r\n * @param {string} public_id\r\n * @param {object} options\r\n * @param {srcset} options.srcset arguments required to generate the srcset attribute.\r\n * @param {object} options.attributes HTML tag attributes\r\n * @return {string}\r\n */\n\n\nexports.source = function source(public_id) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var srcsetParam = cloudinary.utils.extend({}, options.srcset, cloudinary.config().srcset);\n  var attributes = options.attributes || {};\n  cloudinary.utils.extend(attributes, generateImageResponsiveAttributes(public_id, attributes, srcsetParam, options));\n\n  if (!attributes.srcset) {\n    attributes.srcset = cloudinary.url(public_id, options);\n  }\n\n  if (!attributes.media && options.media) {\n    attributes.media = generateMediaAttr(options.media);\n  }\n\n  return `<source ${cloudinary.utils.html_attrs(attributes)}>`;\n};\n/**\r\n * Generate a <code>picture</code> HTML tag.<br>\r\n *   The sources argument defines different transformations to apply for each\r\n *   media query.\r\n * @param {string}public_id\r\n * @param {object} options\r\n * @param {object[]} options.sources a list of source arguments. A source tag will be rendered for each item\r\n * @param {number} options.sources.min_width a minimum width query\r\n * @param {number} options.sources.max_width a maximum width query\r\n * @param {number} options.sources.transformation the transformation to apply to the source tag.\r\n * @return {string} A picture HTML tag\r\n * @example\r\n *\r\n * cloudinary.picture(\"sample\", {\r\n *   sources: [\r\n *     {min_width: 1600, transformation: {crop: 'fill', width: 800, aspect_ratio: 2}},\r\n *     {min_width: 500, transformation: {crop: 'fill', width: 600, aspect_ratio: 2.3}},\r\n *     {transformation: {crop: 'crop', width: 400, gravity: 'auto'}},\r\n *     ]}\r\n * );\r\n */\n\n\nexports.picture = function picture(public_id) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var sources = options.sources || [];\n  options = cloudinary.utils.clone(options);\n  delete options.sources;\n  cloudinary.utils.patchFetchFormat(options);\n  return \"<picture>\" + sources.map(function (source) {\n    var sourceOptions = chainTransformations(options, source.transformation);\n    sourceOptions.media = source;\n    return cloudinary.source(public_id, sourceOptions);\n  }).join('') + cloudinary.image(public_id, options) + \"</picture>\";\n};\n\nexports.cloudinary_js_config = cloudinary.utils.cloudinary_js_config;\nexports.CF_SHARED_CDN = cloudinary.utils.CF_SHARED_CDN;\nexports.AKAMAI_SHARED_CDN = cloudinary.utils.AKAMAI_SHARED_CDN;\nexports.SHARED_CDN = cloudinary.utils.SHARED_CDN;\nexports.BLANK = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\nexports.v2 = require('./v2');","map":{"version":3,"sources":["D:/PROJECT ALL/MonkeyFruad/Backend/node_modules/cloudinary/lib-es5/cloudinary.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_","require","exports","config","utils","uploader","api","account","provisioning","PreloadedFile","Cache","cloudinary","module","optionConsume","option_consume","url","public_id","options","extend","_require","generateImageResponsiveAttributes","generateMediaAttr","chainTransformations","transformation","arguments","undefined","urlOptions","extractUrlParams","currentTransformation","extractTransformationParams","build_array","concat","image","source","localOptions","srcsetParam","attributes","src","width","height","client_hints","responsive","hidpi","classes","current_class","push","class","join","responsive_placeholder","BLANK","html","responsiveAttributes","isString","srcset","isEmpty","html_attrs","video","replace","source_types","source_transformation","sources","fallback","DEFAULT_VIDEO_SOURCE_TYPES","video_options","cloneDeep","hasOwnProperty","isPlainObject","poster","DEFAULT_POSTER_OPTIONS","resource_type","multi_source_types","has_sources","map","source_type","type","transformations","source_data","codecs","create_source_tag","media","picture","clone","patchFetchFormat","sourceOptions","cloudinary_js_config","CF_SHARED_CDN","AKAMAI_SHARED_CDN","SHARED_CDN","v2"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\r\n\r\nvar _ = require('lodash');\r\nexports.config = require(\"./config\");\r\nexports.utils = require(\"./utils\");\r\nexports.uploader = require(\"./uploader\");\r\nexports.api = require(\"./api\");\r\nvar account = require(\"./provisioning/account\");\r\n\r\nexports.provisioning = {\r\n  account: account\r\n};\r\nexports.PreloadedFile = require(\"./preloaded_file\");\r\nexports.Cache = require('./cache');\r\n\r\nvar cloudinary = module.exports;\r\n\r\nvar optionConsume = cloudinary.utils.option_consume;\r\n\r\nexports.url = function url(public_id, options) {\r\n  options = _.extend({}, options);\r\n  return cloudinary.utils.url(public_id, options);\r\n};\r\n\r\nvar _require = require('./utils/srcsetUtils'),\r\n    generateImageResponsiveAttributes = _require.generateImageResponsiveAttributes,\r\n    generateMediaAttr = _require.generateMediaAttr;\r\n\r\n/**\r\n * Helper function, allows chaining transformation to the end of transformation list\r\n *\r\n * @private\r\n * @param {object} options Original options\r\n * @param {object|object[]} transformation Transformations to chain at the end\r\n *\r\n * @return {object} Resulting options\r\n */\r\n\r\n\r\nfunction chainTransformations(options) {\r\n  var transformation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\r\n\r\n  // preserve url options\r\n  var urlOptions = cloudinary.utils.extractUrlParams(options);\r\n  var currentTransformation = cloudinary.utils.extractTransformationParams(options);\r\n  transformation = cloudinary.utils.build_array(transformation);\r\n  urlOptions.transformation = [currentTransformation].concat(_toConsumableArray(transformation));\r\n  return urlOptions;\r\n}\r\n\r\n/**\r\n * Generate an HTML img tag with a Cloudinary URL\r\n * @param {string} source A Public ID or a URL\r\n * @param {object} options Configuration options\r\n * @param {srcset} options.srcset srcset options\r\n * @param {object} options.attributes HTML attributes\r\n * @param {number} options.html_width (deprecated) The HTML tag width\r\n * @param {number} options.html_height (deprecated) The HTML tag height\r\n * @param {boolean} options.client_hints Don't implement the client side responsive function.\r\n *                  This argument can override the the same option in the global configuration.\r\n * @param {boolean} options.responsive Setup the tag for the client side responsive function.\r\n * @param {boolean} options.hidpi Setup the tag for the client side auto dpr function.\r\n * @param {boolean} options.responsive_placeholder A place holder image URL to use with.\r\n *                  the client side responsive function\r\n * @return {string} An HTML img tag\r\n */\r\nexports.image = function image(source, options) {\r\n  var localOptions = _.extend({}, options);\r\n  var srcsetParam = optionConsume(localOptions, 'srcset');\r\n  var attributes = optionConsume(localOptions, 'attributes', {});\r\n  var src = cloudinary.utils.url(source, localOptions);\r\n  if (\"html_width\" in localOptions) localOptions.width = optionConsume(localOptions, \"html_width\");\r\n  if (\"html_height\" in localOptions) localOptions.height = optionConsume(localOptions, \"html_height\");\r\n\r\n  var client_hints = optionConsume(localOptions, \"client_hints\", cloudinary.config().client_hints);\r\n  var responsive = optionConsume(localOptions, \"responsive\");\r\n  var hidpi = optionConsume(localOptions, \"hidpi\");\r\n\r\n  if ((responsive || hidpi) && !client_hints) {\r\n    localOptions[\"data-src\"] = src;\r\n    var classes = [responsive ? \"cld-responsive\" : \"cld-hidpi\"];\r\n    var current_class = optionConsume(localOptions, \"class\");\r\n    if (current_class) classes.push(current_class);\r\n    localOptions.class = classes.join(\" \");\r\n    src = optionConsume(localOptions, \"responsive_placeholder\", cloudinary.config().responsive_placeholder);\r\n    if (src === \"blank\") {\r\n      src = cloudinary.BLANK;\r\n    }\r\n  }\r\n  var html = \"<img \";\r\n  if (src) html += \"src='\" + src + \"' \";\r\n  var responsiveAttributes = {};\r\n  if (cloudinary.utils.isString(srcsetParam)) {\r\n    responsiveAttributes.srcset = srcsetParam;\r\n  } else {\r\n    responsiveAttributes = generateImageResponsiveAttributes(source, attributes, srcsetParam, options);\r\n  }\r\n  if (!cloudinary.utils.isEmpty(responsiveAttributes)) {\r\n    delete localOptions.width;\r\n    delete localOptions.height;\r\n  }\r\n  html += cloudinary.utils.html_attrs(_.extend(localOptions, responsiveAttributes, attributes)) + \"/>\";\r\n  return html;\r\n};\r\n\r\n/**\r\n * Creates an HTML video tag for the provided public_id\r\n * @param {String} public_id the resource public ID\r\n * @param {Object} [options] options for the resource and HTML tag\r\n * @param {(String|Array<String>)} [options.source_types] Specify which\r\n *        source type the tag should include. defaults to webm, mp4 and ogv.\r\n * @param {String} [options.source_transformation] specific transformations\r\n *        to use for a specific source type.\r\n * @param {(String|Object)} [options.poster] image URL or\r\n *        poster options that may include a <tt>public_id</tt> key and\r\n *        poster-specific transformations\r\n * @example <caption>Example of generating a video tag:</caption>\r\n * cloudinary.video(\"mymovie.mp4\");\r\n * cloudinary.video(\"mymovie.mp4\", {source_types: 'webm'});\r\n * cloudinary.video(\"mymovie.ogv\", {poster: \"myspecialplaceholder.jpg\"});\r\n * cloudinary.video(\"mymovie.webm\", {source_types: ['webm', 'mp4'], poster: {effect: 'sepia'}});\r\n * @return {string} HTML video tag\r\n */\r\nexports.video = function video(public_id, options) {\r\n  options = _.extend({}, options);\r\n  public_id = public_id.replace(/\\.(mp4|ogv|webm)$/, '');\r\n  var source_types = optionConsume(options, 'source_types', []);\r\n  var source_transformation = optionConsume(options, 'source_transformation', {});\r\n  var sources = optionConsume(options, 'sources', []);\r\n  var fallback = optionConsume(options, 'fallback_content', '');\r\n\r\n  if (source_types.length === 0) source_types = cloudinary.utils.DEFAULT_VIDEO_SOURCE_TYPES;\r\n  var video_options = _.cloneDeep(options);\r\n\r\n  if (video_options.hasOwnProperty('poster')) {\r\n    if (_.isPlainObject(video_options.poster)) {\r\n      if (video_options.poster.hasOwnProperty('public_id')) {\r\n        video_options.poster = cloudinary.utils.url(video_options.poster.public_id, video_options.poster);\r\n      } else {\r\n        video_options.poster = cloudinary.utils.url(public_id, _.extend({}, cloudinary.utils.DEFAULT_POSTER_OPTIONS, video_options.poster));\r\n      }\r\n    }\r\n  } else {\r\n    video_options.poster = cloudinary.utils.url(public_id, _.extend({}, cloudinary.utils.DEFAULT_POSTER_OPTIONS, options));\r\n  }\r\n\r\n  if (!video_options.poster) delete video_options.poster;\r\n\r\n  var html = '<video ';\r\n\r\n  if (!video_options.hasOwnProperty('resource_type')) video_options.resource_type = 'video';\r\n  var multi_source_types = _.isArray(source_types) && source_types.length > 1;\r\n  var has_sources = _.isArray(sources) && sources.length > 0;\r\n  var source = public_id;\r\n  if (!multi_source_types && !has_sources) {\r\n    source = source + '.' + cloudinary.utils.build_array(source_types)[0];\r\n  }\r\n  var src = cloudinary.utils.url(source, video_options);\r\n  if (!multi_source_types && !has_sources) video_options.src = src;\r\n  if (video_options.hasOwnProperty(\"html_width\")) video_options.width = optionConsume(video_options, 'html_width');\r\n  if (video_options.hasOwnProperty(\"html_height\")) video_options.height = optionConsume(video_options, 'html_height');\r\n  html = html + cloudinary.utils.html_attrs(video_options) + '>';\r\n  if (multi_source_types && !has_sources) {\r\n    sources = source_types.map(function (source_type) {\r\n      return {\r\n        type: source_type,\r\n        transformations: source_transformation[source_type] || {}\r\n      };\r\n    });\r\n  }\r\n  if (_.isArray(sources) && sources.length > 0) {\r\n    html += sources.map(function (source_data) {\r\n      var source_type = source_data.type;\r\n      var codecs = source_data.codecs;\r\n      var transformation = source_data.transformations || {};\r\n      src = cloudinary.utils.url(source + \".\" + source_type, _.extend({ resource_type: 'video' }, _.cloneDeep(options), _.cloneDeep(transformation)));\r\n      return cloudinary.utils.create_source_tag(src, source_type, codecs);\r\n    }).join('');\r\n  }\r\n  return `${html}${fallback}</video>`;\r\n};\r\n\r\n/**\r\n * Generate a <code>source</code> tag.\r\n * @param {string} public_id\r\n * @param {object} options\r\n * @param {srcset} options.srcset arguments required to generate the srcset attribute.\r\n * @param {object} options.attributes HTML tag attributes\r\n * @return {string}\r\n */\r\nexports.source = function source(public_id) {\r\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n  var srcsetParam = cloudinary.utils.extend({}, options.srcset, cloudinary.config().srcset);\r\n  var attributes = options.attributes || {};\r\n\r\n  cloudinary.utils.extend(attributes, generateImageResponsiveAttributes(public_id, attributes, srcsetParam, options));\r\n  if (!attributes.srcset) {\r\n    attributes.srcset = cloudinary.url(public_id, options);\r\n  }\r\n  if (!attributes.media && options.media) {\r\n    attributes.media = generateMediaAttr(options.media);\r\n  }\r\n  return `<source ${cloudinary.utils.html_attrs(attributes)}>`;\r\n};\r\n\r\n/**\r\n * Generate a <code>picture</code> HTML tag.<br>\r\n *   The sources argument defines different transformations to apply for each\r\n *   media query.\r\n * @param {string}public_id\r\n * @param {object} options\r\n * @param {object[]} options.sources a list of source arguments. A source tag will be rendered for each item\r\n * @param {number} options.sources.min_width a minimum width query\r\n * @param {number} options.sources.max_width a maximum width query\r\n * @param {number} options.sources.transformation the transformation to apply to the source tag.\r\n * @return {string} A picture HTML tag\r\n * @example\r\n *\r\n * cloudinary.picture(\"sample\", {\r\n *   sources: [\r\n *     {min_width: 1600, transformation: {crop: 'fill', width: 800, aspect_ratio: 2}},\r\n *     {min_width: 500, transformation: {crop: 'fill', width: 600, aspect_ratio: 2.3}},\r\n *     {transformation: {crop: 'crop', width: 400, gravity: 'auto'}},\r\n *     ]}\r\n * );\r\n */\r\nexports.picture = function picture(public_id) {\r\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n  var sources = options.sources || [];\r\n  options = cloudinary.utils.clone(options);\r\n  delete options.sources;\r\n  cloudinary.utils.patchFetchFormat(options);\r\n  return \"<picture>\" + sources.map(function (source) {\r\n    var sourceOptions = chainTransformations(options, source.transformation);\r\n    sourceOptions.media = source;\r\n    return cloudinary.source(public_id, sourceOptions);\r\n  }).join('') + cloudinary.image(public_id, options) + \"</picture>\";\r\n};\r\n\r\nexports.cloudinary_js_config = cloudinary.utils.cloudinary_js_config;\r\nexports.CF_SHARED_CDN = cloudinary.utils.CF_SHARED_CDN;\r\nexports.AKAMAI_SHARED_CDN = cloudinary.utils.AKAMAI_SHARED_CDN;\r\nexports.SHARED_CDN = cloudinary.utils.SHARED_CDN;\r\nexports.BLANK = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\r\nexports.v2 = require('./v2');"]},"metadata":{},"sourceType":"script"}